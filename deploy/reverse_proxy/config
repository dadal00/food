listen_port = 8080

[apps]
[apps.main]
server_name = '${DOMAIN}'

[[apps.main.reverse_proxy]]
upstream = [{ location = 'rust:${RUST_PORT}' }]
upstream_options = ["keep_original_host"]

[experimental]
ignore_sni_consistency = false
connection_handling_timeout = 0

[experimental.h3]
alt_svc_max_age = 3600
request_max_body_size = 65536
max_concurrent_connections = 10000
max_concurrent_bidistream = 100
max_concurrent_unistream = 100
max_idle_timeout = 10

[experimental.cache]
cache_dir = './cache'
max_cache_entry = 1000
max_cache_each_size = 65535
max_cache_each_size_on_memory = 4096

[experimental.custom]
# How long before another request from user for
fast_rate_limit_ms = 200        # FAST endpoints such as search
fast_paths = ["${DOMAIN}/search"]
slow_rate_limit_ms = 2000       # and all other endpoints
max_entries = 10000             # Max number of cached entries any given rate limit interval
